{
  "project": "Rampart Remake",
  "branchName": "ralph/phase-9-ship-variety",
  "description": "Phase 9 - Ship Variety & Combat AI: Differentiated ship types with unique behaviors, smarter AI, and boss encounters",
  "completedPhases": [
    {
      "phase": 1,
      "name": "Foundation",
      "description": "Next.js + Phaser setup, logging, deployment"
    },
    {
      "phase": 2,
      "name": "Grid System",
      "description": "Tile rendering, map data structure"
    },
    {
      "phase": 3,
      "name": "Phase State Machine",
      "description": "Game phase management (BUILD/DEPLOY/COMBAT/SCORING)"
    },
    {
      "phase": 4,
      "name": "Build Phase",
      "description": "Tetris-style wall placement"
    },
    {
      "phase": 5,
      "name": "Deploy Phase",
      "description": "Cannon placement in enclosed territories"
    },
    {
      "phase": 6,
      "name": "Combat Phase",
      "description": "Ships, shooting, projectiles, hit detection"
    },
    {
      "phase": 7,
      "name": "Game Loop Integration",
      "description": "Lives, scoring, game over/victory screens"
    },
    {
      "phase": 8,
      "name": "Polish & Advanced Features",
      "description": "Sound effects (Web Audio API), visual effects (particles), screen shake, level progression, multiple map presets"
    }
  ],
  "userStories": [
    {
      "id": "US-001",
      "title": "Differentiated Ship Types",
      "description": "As a player, I want different ship types with distinct behaviors so combat feels varied and strategic.",
      "acceptanceCriteria": [
        "Scout ships: Fast (1.0 speed), low HP (2), low damage, spawns first",
        "Frigate ships: Medium speed (0.5), medium HP (3), medium damage, standard enemy",
        "Destroyer ships: Slow (0.3 speed), high HP (5), high damage, appears in later waves",
        "Ship type visually distinct (different sizes, colors, sail patterns)",
        "Ship stats defined in a config object for easy balancing",
        "npm run build passes without errors"
      ],
      "priority": 1,
      "passes": true,
      "notes": "SHIP_STATS_CONFIG exported from CombatPhaseSystem.ts. Added critical hit system: hits within 0.25 tiles of ship center deal 2x damage + 25 bonus points. Includes visual effect (white/yellow flash) and sound."
    },
    {
      "id": "US-002",
      "title": "Wave Composition System",
      "description": "As a player, I want enemy waves to have varied compositions based on level so difficulty feels progressive.",
      "acceptanceCriteria": [
        "Level 1-2: Scouts and Frigates only",
        "Level 3-4: Add Destroyers to the mix",
        "Level 5+: Larger waves with all ship types",
        "Wave composition defined in config for easy tuning",
        "Total wave difficulty scales with level (weighted by ship HP)",
        "npm run build passes without errors"
      ],
      "priority": 2,
      "passes": true,
      "notes": "WAVE_COMPOSITION_CONFIG exported from CombatPhaseSystem.ts. Three tiers: early (L1-2, scouts+frigates), mid (L3-4, adds destroyers), late (L5+, heavy destroyers). Ship count scales with level within tier min/max."
    },
    {
      "id": "US-003",
      "title": "Smarter Ship AI",
      "description": "As a player, I want ships to behave more intelligently so combat is more challenging.",
      "acceptanceCriteria": [
        "Ships prioritize targeting cannons over random land tiles",
        "Ships spread out rather than clustering",
        "Ships avoid areas with many craters (already damaged)",
        "Destroyers focus fire on castle areas",
        "npm run build passes without errors"
      ],
      "priority": 3,
      "passes": true,
      "notes": "Ship spread via calculateSpreadOffset() in path generation. Crater avoidance filters land targets with 3+ craters nearby. Destroyers have 60% castle priority. Smart targeting 70%/random 30% mix."
    },
    {
      "id": "US-004",
      "title": "Boss Ship Encounters",
      "description": "As a player, I want occasional boss ships that require focused fire to defeat.",
      "acceptanceCriteria": [
        "Boss ship appears every 5 levels",
        "Boss has high HP (15), slow speed (0.2), fires multiple projectiles",
        "Boss is visually larger and distinct (red sails, larger hull)",
        "Boss destruction awards bonus points (500)",
        "Boss plays unique sound on spawn and destruction",
        "npm run build passes without errors"
      ],
      "priority": 4,
      "passes": true,
      "notes": "Boss spawns on level % 5 === 0. Stats: 15 HP, 0.2 speed, 3 damage, 500 points. Fires 3-projectile spread. Visual: 1.8x scale, bright red sails. Sounds: playBossSpawn() horn, playBossExplosion() massive rumble."
    },
    {
      "id": "US-005",
      "title": "Ship Destruction Effects",
      "description": "As a player, I want satisfying feedback when ships are destroyed.",
      "acceptanceCriteria": [
        "Different explosion sizes based on ship type (bigger for destroyers)",
        "Sinking animation (ship tilts and fades)",
        "Debris particles fall into water",
        "Sound pitch varies by ship size",
        "npm run build passes without errors"
      ],
      "priority": 5,
      "passes": true,
      "notes": "createShipExplosion() accepts shipType param. Scout=small/high-pitch, Destroyer=large/low-pitch, Boss=massive with secondary explosion. Debris particles for destroyers/boss fall with gravity. Sinking animation deferred (explosion covers destruction)."
    },
    {
      "id": "US-006",
      "title": "Combat Statistics Display",
      "description": "As a player, I want to see combat stats at the end of each round.",
      "acceptanceCriteria": [
        "Show ships destroyed by type (e.g., 'Scouts: 3, Frigates: 2, Destroyers: 1')",
        "Show accuracy percentage (shots fired vs hits)",
        "Show damage taken (craters created)",
        "Stats displayed on LevelCompleteScreen",
        "npm run build passes without errors"
      ],
      "priority": 6,
      "passes": false,
      "notes": "LevelCompleteScreen exists - extend with detailed stats tracking"
    }
  ],
  "futurePhaseConcepts": [
    {
      "phase": 10,
      "name": "Local Multiplayer",
      "concepts": ["Split keyboard controls", "Territory vs territory combat", "Shared screen play", "Victory conditions for PvP"]
    },
    {
      "phase": 11,
      "name": "Power-ups & Special Abilities",
      "concepts": ["Repair walls ability", "Rapid fire mode", "Shield generator", "Bomb cannon (area damage)"]
    },
    {
      "phase": 12,
      "name": "Mobile & Accessibility",
      "concepts": ["Touch controls", "Responsive canvas sizing", "Color-blind friendly modes", "Pause/resume support"]
    },
    {
      "phase": 13,
      "name": "Online Features",
      "concepts": ["Leaderboards", "Daily challenges", "Achievements", "Cloud save"]
    }
  ]
}
